<div class="content-wrapper">
  <!-- Content Header (Page header) -->
  <div class="content-header"></div>
  <!-- /.content-header -->

  <!-- Main content -->
  <section class="content" data-select2-id="32">
    <div class="container-fluid" data-select2-id="31">
      <!-- <flash-messages></flash-messages> -->
      <!-- SELECT2 EXAMPLE -->
      <div class="card card-secondary">
        <div class="card-header custome">
          <h3 class="card-title">Schedules</h3>
        </div>
        <!-- /.card-header -->
        <div class="card-body">
          <div class="over-auto">
            <!-- <p class="login-box-msg bold-black">List of Employees</p> -->
            <section class="table-header">
              <div class="table-header-cont-1"></div>
              <div class="table-header-cont-2">
                <div class="table-header-btns"></div>
              </div>
              <div class="table-header-cont-3">
                <input
                  class="form-control"
                  #searchTable
                  type="search"
                  placeholder="search business name"
                  [value]="queryString()"
                  (search)="queryTable(searchTable)" />
              </div>
            </section>

            <table
              class="table table-bordered table-condensed"
              width="100%">
              <thead>
                <tr>
                  <th>S/N</th>
                  @if(tokenService.getLoginResData.isAdminUser){
                    <th>Company RIN</th>
                    <th>Company Name</th>
                  }
                  <th>Business RIN</th>
                  <th>Business Name</th>
                  <th>Tax Year</th>
                  <th>Tax Month</th>
                  <th>Employee Count</th>
                  <th>Total Income</th>
                  <th>Monthly Tax</th>
                  <th>Date Forwarded</th>
                  <th>Assessment Status</th>
                  <th>View</th>
                </tr>
              </thead>
              <tbody>
                @if(dataLoading()){
                <tr>
                  <td colspan="100%"><span>Loading...</span></td>
                </tr>
                } @else if (dataMessage()) {
                <tr>
                  <td colspan="100%">
                    <span>{{ dataMessage() }}</span>
                  </td>
                </tr>
                } @else { @for (mydata of businessesData(); track $index) {
                <tr>
                  <td>{{ $index + 1 }}</td>
                  @if(tokenService.getLoginResData.isAdminUser){
                    <th>Company RIN</th>
                    <th>Company Name</th>
                  }
                  <td>{{ mydata?.businessRin }}</td>
                  <td>{{ mydata?.businessName | titlecase }}</td>
                  <td>{{ mydata?.taxYear }}</td>
                  <td>{{ mydata?.taxMonth }}</td>
                  <td>{{ mydata?.employeeCount }}</td>
                  <td>
                    {{ mydata?.totalIncome }}
                  </td>
                  <td>
                    {{ mydata?.monthlyTax }}
                  </td>
                  <td>
                    {{ mydata?.dateForwarded | date }}
                  </td>
                  <td>
                    {{ mydata?.assessementStatus }}
                  </td>

                  <td title="View">
                    <button
                      class="btn btn-sm btn-outline-success"
                      (click)="openScheduleView(mydata)">
                      <i class="nav-icon fas fa-eye"></i>
                    </button>
                  </td>
                </tr>
                }@empty {
                <tr>
                  <td colspan="8">
                    <span>No schedules available for this record.</span>
                  </td>
                </tr>
                } }
              </tbody>
            </table>

            <section>
              <mat-paginator
                [length]="totalLength()"
                [pageSize]="pageSize()"
                [pageIndex]="pageIndex()"
                (page)="handlePageEvent($event)"
                showFirstLastButtons
                aria-label="Select page">
              </mat-paginator>
            </section>
          </div>
        </div>
        <!-- /.card-body -->
        <!-- <div class="card-footer" *ngIf="apidataEmpty">
            <button *ngIf="showCreateSchedule" type="submit" (click)="forwardSchedule(schedulemodal)"
              class="btn btn button-login"><i class="fas fa-plus-square"></i> Create Schedule</button>
          </div> -->
      </div>
    </div>
    <!-- /.container-fluid -->
  </section>
  <!-- /.content -->
</div>

<ng-template #schedulesModal let-modal>
  <div class="modal-header">
    <div class="">
      <!-- <h4 class="modal-title" id="modal-basic-title">Monthly Remittance Schedules</h4> -->
    </div>

    <div class="schedule-buttons">
      <button>Send to RDM</button>
      <button>Re-Send to RDM</button>
      <button>Revise Submission</button>
      <button>Re-Assess</button>
    </div>
    <!-- /.card-header -->
    <!-- /.card-body -->
  </div>

  <div class="modal-body">
    <div class="container">
      <table
        class="table table-bordered table-condensed"
        *ngIf="schedulesData"
        datatable
        [dtOptions]="dtOptions"
        width="100%">
        <thead>
          <tr>
            <th>S/N</th>
            <th>Employee RIN</th>
            <th>Full Name</th>
            <th>Total Income</th>
            <th>Non Taxable Income</th>
            <th>CRA</th>
            <th>Tax Free Pay</th>
            <th>Chargeable Income</th>
            <th>Monthly Tax</th>
            <th>View</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let mydata of schedulesData; index as i">
            <td>{{ i + 1 }}</td>
            <td>
              <p
                [ngClass]="{
                  'text-danger': mydata.forwarded_to == 0,
                  'text-primary': mydata.forwarded_to == 1,
                  'text-success': mydata.forwarded_to == 2
                }">
                {{
                  mydata.forwarded_to == 0
                    ? "Schedule Not forwarded"
                    : mydata.forwarded_to == 1
                    ? "Sent back to Editor"
                    : "Forwarded to Manager"
                }}
              </p>
            </td>

            <td>{{ mydata.date_forwarded | date : "dd MMM yyyy" }}</td>
            <td>{{ mydata.due_date | date : "MMMM" }}</td>
            <td>{{ mydata.due_date | date : "y" }}</td>
            <td>
              <p
                [ngClass]="{
                  'text-danger': mydata.assessment_status == 0,
                  'text-primary': mydata.assessment_status == 1,
                  'text-success': mydata.assessment_status == 2
                }">
                {{
                  mydata.assessment_status == 0 ? "Still Open" : "Case Closed"
                }}
              </p>
            </td>
            <!-- <td>{{ mydata.status == 0 ? "In Active" : "Active" }}</td> -->

            <td>{{ mydata.created_at | date : "dd MMM yyyy" }}</td>
            <td>{{ mydata.created_at | date : "dd MMM yyyy" }}</td>
            <td>{{ mydata.created_at | date : "dd MMM yyyy" }}</td>
            <td title="View">
              <button
                class="btn btn-sm btn-outline-success"
                (click)="viewSchedule(mymodal, mydata)">
                <i class="nav-icon fas fa-eye"></i>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <!-- <div class="over-auto">

      </div> -->
  </div>

  <div class="modal-footer">
    <button
      type="button"
      class="btn btn-outline-dark button-login"
      (click)="modal.close('Save click')">
      Ok
    </button>
  </div>
</ng-template>

<ng-template #mymodal let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Schedule Details</h4>
  </div>

  <div class="modal-body">
    <div class="container">
      <div class="form-row">
        <div class="col-md-12"></div>
      </div>

      <form [formGroup]="scheduleForm">
        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="forwardedTo">Forwarded To</label>
            <input
              type="text"
              formControlName="forwardedTo"
              class="form-control"
              [attr.disabled]="true"
              [ngClass]="{
                'is-invalid':
                  submitted && scheduleForm.controls['forwardedTo'].errors
              }" />
          </div>

          <div class="form-group col-md-6">
            <label for="assessmentStatus">Assessment Status</label>
            <input
              type="text"
              formControlName="assessmentStatus"
              class="form-control"
              [attr.disabled]="true"
              [ngClass]="{
                'is-invalid':
                  submitted && scheduleForm.controls['assessmentStatus'].errors
              }" />
          </div>
        </div>

        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="dateForwarded">Date Forwarded</label>
            <input
              type="text"
              formControlName="dateForwarded"
              class="form-control"
              [attr.disabled]="true"
              [ngClass]="{
                'is-invalid':
                  submitted && scheduleForm.controls['dateForwarded'].errors
              }" />
          </div>

          <div class="form-group col-md-6">
            <label for="dueDate">Due Date</label>
            <input
              type="text"
              formControlName="dueDate"
              class="form-control"
              [attr.disabled]="true"
              [ngClass]="{
                'is-invalid':
                  submitted && scheduleForm.controls['dueDate'].errors
              }" />
          </div>
        </div>

        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="createdAt">Date Created</label>
            <input
              type="text"
              formControlName="createdAt"
              class="form-control"
              [attr.disabled]="true"
              [ngClass]="{
                'is-invalid':
                  submitted && scheduleForm.controls['createdAt'].errors
              }" />
          </div>
        </div>
      </form>

      <div>
        <table
          class="table table-bordered table-condensed"
          datatable
          *ngIf="scheduleEmployeesData"
          [dtOptions]="dtOptions"
          width="100%">
          <thead>
            <tr>
              <th>S/N</th>
              <th>Taxpayer ID</th>
              <th>Employee Name</th>
              <th>Total Income (₦)</th>
              <th>Pension (₦)</th>
              <th>NHF (₦)</th>

              <th>NHIS (₦)</th>
              <th>Life Assurance (₦)</th>
              <th>CRA (₦)</th>
              <th *ngIf="showEditEmployee">Edit</th>
            </tr>
          </thead>
          <tbody>
            @if(dataLoading()){
            <tr>
              <td colspan="100%"><span>Loading...</span></td>
            </tr>
            } @else if (dataMessage()) {
            <tr>
              <td colspan="100%">
                <span>{{ dataMessage() }}</span>
              </td>
            </tr>
            } @else { @for (mydata of scheduleEmployeesData; track $index) {
            <tr>
              <td>{{ $index + 1 }}</td>
              <td>{{ mydata.taxpayer_id }}</td>
              <td>
                {{ mydata.first_name | titlecase }}
                {{ mydata.last_name | titlecase }}
              </td>

              <td>{{ mydata.total_income | number }}</td>
              <td>{{ mydata.pension | number }}</td>
              <td>{{ mydata.nhf | number }}</td>
              <td>{{ mydata.nhis | number }}</td>
              <td>{{ mydata.life_assurance | number }}</td>

              <td>{{ mydata.cra | number }}</td>
              <td *ngIf="showEditEmployee">
                <button
                  class="btn btn-sm btn-outline-success"
                  [disabled]="assessmentGenerated"
                  (click)="editEmployee(addemployeemodal, mydata)">
                  <i class="nav-icon fas fa-edit"></i> Edit
                </button>
              </td>
            </tr>

            }@empty {
            <tr>
              <td><span>No business found.</span></td>
            </tr>
            } }
          </tbody>
        </table>
      </div>
      <div class="mt-5">
        <div class="text-center font-weight-bold mb-3" *ngIf="commentsData">
          <h4 class="">Schedule Comments log</h4>
        </div>
        <table
          class="table table-bordered table-condensed"
          *ngIf="commentsData"
          width="100%">
          <thead>
            <tr>
              <th>S/N</th>
              <th>Comments</th>
              <th>Date Created</th>
              <th>Date Updated</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let mydata of commentsData; index as i">
              <td>{{ i + 1 }}</td>
              <td>{{ mydata.comment | titlecase }}</td>

              <td>{{ mydata.created_at | date : "MMM d, y, h:mm:ss a" }}</td>
              <td>{{ mydata.updated_at | date : "MMM d, y, h:mm:ss a" }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <div class="modal-footer">
    <button
      *ngIf="managerRole"
      type="submit"
      (click)="forwardSchedule(schedulemodal)"
      [disabled]="assessmentStatusTrue"
      class="btn btn button-login">
      <i class="fas fa-backward"></i> Back to Editor
    </button>
    <button
      type="submit"
      (click)="forwardSchedule(schedulemodal)"
      [disabled]="forwardedTrue || assessmentStatusTrue"
      class="btn btn button-login">
      <i class="fas fa-forward"></i> Forward to Manager
    </button>
    <button
      *ngIf="showGenerateAssessment"
      type="submit"
      (click)="generateAssessment(assessmentmodal)"
      [disabled]="assessmentStatusTrue"
      class="btn btn button-login">
      <i class="far fa-share-square"></i> Generate Assessment
    </button>
    <button
      type="button"
      class="btn btn-outline-dark button-login"
      (click)="modal.close('Save click')">
      Ok
    </button>
  </div>
</ng-template>

<ng-template #schedulemodal let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Forward Schedule</h4>
    <!--<button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                <span aria-hidden="true">&times;</span>
              </button> -->
  </div>

  <div class="modal-body">
    <div class="container">
      <div class="form-row">
        <div class="col-md-12">
          <!-- <img src="assets/dist/img/login-user-img.png" class="rounded float-left" alt="User Image"
                          style="height:90px; width: 130px;"> -->
        </div>
      </div>

      <form
        [formGroup]="forwardScheduleForm"
        (ngSubmit)="onSubmitSchedule(forwardScheduleForm.value)">
        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="scheduleYear">Schedule Year</label>
            <input
              type="text"
              formControlName="scheduleYear"
              class="form-control"
              [attr.disabled]="true"
              [ngClass]="{
                'is-invalid':
                  submitted &&
                  forwardScheduleForm.controls['scheduleYear'].errors
              }" />
            <div
              *ngIf="
                submitted && forwardScheduleForm.controls['scheduleYear'].errors
              "
              class="text-danger">
              <div
                *ngIf="
                  forwardScheduleForm.controls['scheduleYear'].errors[
                    'required'
                  ]
                ">
                Schedule Year is required
              </div>
              <div
                *ngIf="
                  forwardScheduleForm.controls['scheduleYear'].errors[
                    'minlength'
                  ]
                ">
                Schedule Year must be at least 4 characters long.
              </div>
              <div
                *ngIf="
                  forwardScheduleForm.controls['scheduleYear'].errors[
                    'maxLength'
                  ]
                ">
                Schedule Year must be 4 characters long.
              </div>
              <div
                *ngIf="
                  forwardScheduleForm.controls['scheduleYear'].errors['pattern']
                ">
                Schedule Year must be Number Only
              </div>
            </div>
          </div>

          <div class="form-group col-md-6">
            <label for="scheduleMonthId">Schedule Month</label>
            <select
              type="text"
              name="scheduleMonthId"
              formControlName="scheduleMonthId"
              [attr.disabled]="true"
              id="scheduleMonthId"
              class="form-control"
              [ngClass]="{
                'is-invalid':
                  submitted &&
                  forwardScheduleForm.controls['scheduleMonthId'].errors
              }">
              <option value="">Select Schedule Month</option>
              <option value="01">January</option>
              <option value="02">February</option>
              <option value="03">March</option>
              <option value="04">April</option>
              <option value="05">May</option>
              <option value="06">June</option>
              <option value="07">July</option>
              <option value="08">August</option>
              <option value="09">September</option>
              <option value="10">October</option>
              <option value="11">November</option>
              <option value="12">December</option>
            </select>
            <div
              *ngIf="
                submitted &&
                forwardScheduleForm.controls['scheduleMonthId'].errors
              "
              class="text-danger">
              <div
                *ngIf="
                  forwardScheduleForm.controls['scheduleMonthId'].errors[
                    'required'
                  ]
                ">
                Schedule Month is required
              </div>
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="comment">Comment</label>
            <textarea
              type="text"
              formControlName="comment"
              class="form-control"
              rows="4"
              [ngClass]="{
                'is-invalid':
                  submitted && forwardScheduleForm.controls['comment'].errors
              }"></textarea>
            <div
              *ngIf="
                submitted && forwardScheduleForm.controls['comment'].errors
              "
              class="text-danger">
              <!-- <div *ngIf="forwardScheduleForm.controls['myfile']comment.errors.required">Comment is required
                              </div> -->
            </div>
          </div>
        </div>

        <button type="submit" class="btn btn button-login">
          <i class="far fa-save"></i> Save & Forward Schedule
        </button>
      </form>
    </div>
  </div>

  <div class="modal-footer">
    <button
      type="button"
      class="btn btn-outline-dark button-login"
      (click)="modal.close('Save click')">
      Ok
    </button>
  </div>
</ng-template>

<ng-template #assessmentmodal let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Generate Assessment</h4>
    <!--<button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                <span aria-hidden="true">&times;</span>
              </button> -->
  </div>

  <div class="modal-body">
    <div class="container">
      <div class="form-row">
        <div class="col-md-12">
          <!-- <img src="assets/dist/img/login-user-img.png" class="rounded float-left" alt="User Image"
                          style="height:90px; width: 130px;"> -->
        </div>
      </div>

      <form
        [formGroup]="assessmentForm"
        (ngSubmit)="onSubmitAssessment(assessmentForm.value)">
        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="assessmentYear">Assessment Year</label>
            <input
              type="text"
              formControlName="assessmentYear"
              class="form-control"
              [attr.disabled]="true"
              [ngClass]="{
                'is-invalid':
                  submitted && assessmentForm.controls['assessmentYear'].errors
              }" />
            <div
              *ngIf="
                submitted && assessmentForm.controls['assessmentYear'].errors
              "
              class="text-danger">
              <div
                *ngIf="
                  assessmentForm.controls['assessmentYear'].errors['required']
                ">
                Assessment Year is required
              </div>
              <div
                *ngIf="
                  assessmentForm.controls['assessmentYear'].errors['minlength']
                ">
                Assessment Year must be at least 4 characters long.
              </div>
              <div
                *ngIf="
                  assessmentForm.controls['assessmentYear'].errors['maxLength']
                ">
                Assessment Year must be 4 characters long.
              </div>
              <div
                *ngIf="
                  assessmentForm.controls['assessmentYear'].errors['pattern']
                ">
                Assessment Year must be Number Only
              </div>
            </div>
          </div>

          <div class="form-group col-md-6">
            <label for="assessmentMonthId">Assessment Month</label>
            <select
              type="text"
              name="assessmentMonthId"
              formControlName="assessmentMonthId"
              id="assessmentMonthId"
              class="form-control"
              [attr.disabled]="{truthy}"
              [ngClass]="{
                'is-invalid':
                  submitted &&
                  assessmentForm.controls['assessmentMonthId'].errors
              }">
              <option value="">-- Select Tax Month --</option>
              <option value="01">January</option>
              <option value="02">February</option>
              <option value="03">March</option>
              <option value="04">April</option>
              <option value="05">May</option>
              <option value="06">June</option>
              <option value="07">July</option>
              <option value="08">August</option>
              <option value="09">September</option>
              <option value="10">October</option>
              <option value="11">November</option>
              <option value="12">December</option>
            </select>
            <div
              *ngIf="
                submitted && assessmentForm.controls['assessmentMonthId'].errors
              "
              class="text-danger">
              <div
                *ngIf="
                  assessmentForm.controls['assessmentMonthId'].errors[
                    'required'
                  ]
                ">
                Assessment Month is required
              </div>
            </div>
          </div>
        </div>

        <button type="submit" class="btn btn button-login">
          <i class="far fa-share-square"></i> Generate Assessment
        </button>
      </form>
    </div>
  </div>

  <div class="modal-footer">
    <button
      type="button"
      class="btn btn-outline-dark button-login"
      (click)="modal.close('Save click')">
      Ok
    </button>
  </div>
</ng-template>

<ng-template #addemployeemodal let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">{{ addEmployeeTitle }}</h4>

    <!--<button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                  <span aria-hidden="true">&times;</span>
                </button> -->
  </div>

  <div class="modal-body">
    <div class="container">
      <div class="form-row">
        <div class="col-md-12">
          <!-- <img src="assets/dist/img/login-user-img.png" class="rounded float-left" alt="User Image"
                            style="height:90px; width: 130px;"> -->
        </div>
      </div>

      <form
        [formGroup]="addEmployeeForm"
        (ngSubmit)="onSubmitEmployee(addEmployeeForm.value)">
        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="titleId">Title</label>
            <select
              type="text"
              name="titleId"
              formControlName="titleId"
              id="titleId"
              class="form-control"
              [ngClass]="{
                'is-invalid':
                  submitted && addEmployeeForm.controls['titleId'].errors
              }">
              <option value="">Select Title</option>
              <option value="Mr.">Mr.</option>
              <option value="Mrs.">Mrs.</option>
              <option value="Miss.">Miss.</option>
            </select>
            <div
              *ngIf="submitted && addEmployeeForm.controls['titleId'].errors"
              class="text-danger">
              <!-- <div *ngIf="addEmployeeForm.controls['myfile']titleId.errors.required">Title is required</div> -->
            </div>
          </div>

          <div class="form-group col-md-6">
            <label for="firstName"
              >First Name<sup
                style="font-weight: 800"
                class="ml-1 font-wegiht-bold text-danger"
                >*</sup
              ></label
            >
            <input
              type="text"
              formControlName="firstName"
              class="form-control"
              placeholder="First Name"
              [ngClass]="{
                'is-invalid':
                  submitted && addEmployeeForm.controls['firstName'].errors
              }" />
            <div
              *ngIf="submitted && addEmployeeForm.controls['firstName'].errors"
              class="text-danger">
              <div
                *ngIf="
                  addEmployeeForm.controls['firstName'].errors['required']
                ">
                First Name is required
              </div>
              <div
                *ngIf="addEmployeeForm.controls['firstName'].errors['pattern']">
                First Name cannot contain numeric value
              </div>
              <div
                *ngIf="
                  addEmployeeForm.controls['firstName'].errors['maxlength']
                ">
                First Name must be at most 30 characters
              </div>
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="surname"
              >Surname<sup
                style="font-weight: 800"
                class="ml-1 font-wegiht-bold text-danger"
                >*</sup
              ></label
            >
            <input
              type="text"
              formControlName="surname"
              class="form-control"
              placeholder="Surname"
              [ngClass]="{
                'is-invalid':
                  submitted && addEmployeeForm.controls['surname'].errors
              }" />
            <div
              *ngIf="submitted && addEmployeeForm.controls['surname'].errors"
              class="text-danger">
              <div
                *ngIf="addEmployeeForm.controls['surname'].errors['required']">
                Surname is required
              </div>
              <div
                *ngIf="addEmployeeForm.controls['surname'].errors['pattern']">
                Surname cannot contain numeric value
              </div>
              <div
                *ngIf="addEmployeeForm.controls['surname'].errors['maxLength']">
                Surname must at most 30 characters
              </div>
            </div>
          </div>

          <div class="form-group col-md-6">
            <label for="emailAddress"
              >Email Address<sup
                style="font-weight: 800"
                class="ml-1 font-wegiht-bold text-danger"
                >*</sup
              ></label
            >
            <input
              type="text"
              formControlName="emailAddress"
              class="form-control"
              placeholder="Email Address"
              [ngClass]="{
                'is-invalid':
                  submitted && addEmployeeForm.controls['emailAddress'].errors
              }" />
            <div
              *ngIf="
                submitted && addEmployeeForm.controls['emailAddress'].errors
              "
              class="text-danger">
              <div
                *ngIf="
                  addEmployeeForm.controls['emailAddress'].errors['required']
                ">
                Email Address is required
              </div>
              <div
                *ngIf="
                  addEmployeeForm.controls['emailAddress'].errors['minlength']
                ">
                Email Address must not be more than 60 characters long.
              </div>
              <div
                *ngIf="
                  addEmployeeForm.controls['emailAddress'].errors['pattern']
                ">
                Email Address must be a valid email
              </div>
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="phoneNumber"
              >Phone Number
              <sup
                style="font-weight: 800"
                class="ml-1 font-wegiht-bold text-danger"
                >*</sup
              >
            </label>
            <input
              type="text"
              formControlName="phoneNumber"
              class="form-control"
              placeholder="Phone Number"
              maxlength="11"
              [ngClass]="{
                'is-invalid':
                  submitted && addEmployeeForm.controls['phoneNumber'].errors
              }" />
            <div
              *ngIf="
                submitted && addEmployeeForm.controls['phoneNumber'].errors
              "
              class="text-danger">
              <div
                *ngIf="
                  addEmployeeForm.controls['phoneNumber'].errors['required']
                ">
                Phone Number is required
              </div>
              <div
                *ngIf="
                  addEmployeeForm.controls['phoneNumber'].errors['minlength']
                ">
                Phone Number must be at least 11 digits
              </div>
              <div
                *ngIf="
                  addEmployeeForm.controls['phoneNumber'].errors['maxlength']
                ">
                Phone Number must not exceed 11 digits
              </div>
              <div
                *ngIf="
                  addEmployeeForm.controls['phoneNumber'].errors['pattern']
                ">
                Phone Number must be valid
              </div>
            </div>
          </div>

          <div class="form-group col-md-6">
            <label for="employeeTIN"
              >Employee TIN <span class="note-color">**</span></label
            >
            <input
              type="text"
              formControlName="employeeTIN"
              class="form-control"
              placeholder="Employee TIN"
              maxlength="10"
              (keyup)="changeTinPhoneNinBvnStatus()"
              [ngClass]="{
                'is-invalid':
                  (submitted &&
                    addEmployeeForm.controls['employeeTIN'].errors) ||
                  (submitted && validateCacTin)
              }" />
            <div
              *ngIf="
                submitted && addEmployeeForm.controls['employeeTIN'].errors
              "
              class="text-danger">
              <div
                *ngIf="
                  addEmployeeForm.controls['employeeTIN'].errors['minlength']
                ">
                Employee TIN must be at least 10 digits long.
              </div>
              <div
                *ngIf="
                  addEmployeeForm.controls['employeeTIN'].errors['maxlength']
                ">
                Employee TIN must be at most 10 digits long.
              </div>
              <div
                *ngIf="
                  addEmployeeForm.controls['employeeTIN'].errors['pattern']
                ">
                Employee TIN must be numeric value only
              </div>
            </div>
            <div *ngIf="submitted && validateCacTin" class="text-danger">
              <div>JTB-TIN or NIN or BVN Number is required</div>
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="nin">NIN <span class="note-color">**</span> </label>
            <input
              type="text"
              formControlName="nin"
              class="form-control"
              id="nin"
              placeholder="Enter NIN"
              maxlength="11"
              (keyup)="changeTinPhoneNinBvnStatus()"
              [ngClass]="{
                'is-invalid':
                  (submitted && addEmployeeForm.controls['nin'].errors) ||
                  (submitted && validateCacTin)
              }" />
            <div
              *ngIf="submitted && addEmployeeForm.controls['nin'].errors"
              class="text-danger">
              <div *ngIf="addEmployeeForm.controls['nin'].errors['minlength']">
                NIN can not be less than 11 characters
              </div>
              <div *ngIf="addEmployeeForm.controls['nin'].errors['pattern']">
                NIN must be numeric value only
              </div>
            </div>
            <div *ngIf="submitted && validateCacTin" class="text-danger">
              <div>JTB-TIN or NIN or BVN Number is required</div>
            </div>
          </div>

          <div class="form-group col-md-6">
            <label for="bvn">BVN <span class="note-color">**</span> </label>
            <input
              type="text"
              formControlName="bvn"
              class="form-control"
              placeholder="BVN"
              (keyup)="changeTinPhoneNinBvnStatus()"
              [ngClass]="{
                'is-invalid':
                  (submitted && addEmployeeForm.controls['bvn'].errors) ||
                  (submitted && validateCacTin)
              }" />
            <div
              *ngIf="submitted && addEmployeeForm.controls['bvn'].errors"
              class="text-danger">
              <div *ngIf="addEmployeeForm.controls['bvn'].errors['minlength']">
                BVN must be at least 11 characters long.
              </div>
              <div *ngIf="addEmployeeForm.controls['bvn'].errors['maxlength']">
                BVN must be 11 Digit Long.
              </div>
              <div *ngIf="addEmployeeForm.controls['bvn'].errors['pattern']">
                BVN must be numeric value only
              </div>
            </div>
            <div *ngIf="submitted && validateCacTin" class="text-danger">
              <div>JTB-TIN or NIN or BVN Number is required</div>
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="basicIncome"
              >Basic Income<sup
                style="font-weight: 800"
                class="ml-1 font-wegiht-bold text-danger"
                >*</sup
              >
            </label>
            <input
              type="text"
              formControlName="basicIncome"
              class="form-control"
              (keyup)="calculateTotalIncome($event)"
              placeholder="Basic Income"
              [ngClass]="{
                'is-invalid':
                  submitted && addEmployeeForm.controls['basicIncome'].errors
              }" />
            <div
              *ngIf="
                submitted && addEmployeeForm.controls['basicIncome'].errors
              "
              class="text-danger">
              <div
                *ngIf="
                  addEmployeeForm.controls['basicIncome'].errors['required']
                ">
                Basic Income required
              </div>
              <div
                *ngIf="
                  addEmployeeForm.controls['basicIncome'].errors['pattern']
                ">
                Basic Income must be Number with only two digits allowed after
                the decimal
              </div>
            </div>
          </div>
          <div class="form-group col-md-6">
            <label for="rent"
              >Rent
              <!-- <sup
                  style="font-weight: 800"
                  class="ml-1 font-wegiht-bold text-danger"
                  >*</sup
                > -->
            </label>
            <input
              type="text"
              formControlName="rent"
              class="form-control"
              placeholder="Rent"
              (keyup)="calculateTotalIncome($event)"
              [ngClass]="{
                'is-invalid':
                  submitted && addEmployeeForm.controls['rent'].errors
              }" />
            <div
              *ngIf="submitted && addEmployeeForm.controls['rent'].errors"
              class="text-danger">
              <!-- <div *ngIf="addEmployeeForm.controls['myfile']rent.errors.required">
                  Rent required
                </div> -->
              <div *ngIf="addEmployeeForm.controls['rent'].errors['pattern']">
                Rent must be Number with only two digits allowed after the
                decimal
              </div>
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="transport"
              >Transport
              <!-- <sup
                    style="font-weight: 800"
                    class="ml-1 font-wegiht-bold text-danger"
                    >*</sup
                  > -->
            </label>
            <input
              type="text"
              formControlName="transport"
              class="form-control"
              (keyup)="calculateTotalIncome($event)"
              placeholder="transport"
              [ngClass]="{
                'is-invalid':
                  submitted && addEmployeeForm.controls['transport'].errors
              }" />
            <div
              *ngIf="submitted && addEmployeeForm.controls['transport'].errors"
              class="text-danger">
              <!-- <div *ngIf="addEmployeeForm.controls['myfile']transport.errors.required">
                    Transport required
                  </div> -->
              <div
                *ngIf="addEmployeeForm.controls['transport'].errors['pattern']">
                Transport must be Number with only two digits allowed after the
                decimal
              </div>
            </div>
          </div>

          <div class="form-group col-md-6">
            <label for="otherIncome"
              >Other Income
              <!-- <sup
                    style="font-weight: 800"
                    class="ml-1 font-wegiht-bold text-danger"
                    >*</sup
                  > -->
            </label>
            <input
              type="text"
              formControlName="otherIncome"
              class="form-control"
              (keyup)="calculateTotalIncome($event)"
              placeholder="Other Income"
              [ngClass]="{
                'is-invalid':
                  submitted && addEmployeeForm.controls['otherIncome'].errors
              }" />
            <div
              *ngIf="
                submitted && addEmployeeForm.controls['otherIncome'].errors
              "
              class="text-danger">
              <!-- <div *ngIf="addEmployeeForm.controls['myfile']otherIncome.errors.required">
                    otherIncome required
                  </div> -->
              <div
                *ngIf="
                  addEmployeeForm.controls['otherIncome'].errors['pattern']
                ">
                Other Income must be Number with only two digits allowed after
                the decimal
              </div>
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="designation"
              >Designation<sup
                style="font-weight: 800"
                class="ml-1 font-wegiht-bold text-danger"
                >*</sup
              ></label
            >
            <input
              type="text"
              formControlName="designation"
              class="form-control"
              placeholder="Designation"
              [ngClass]="{
                'is-invalid':
                  submitted && addEmployeeForm.controls['designation'].errors
              }" />
            <div
              *ngIf="
                submitted && addEmployeeForm.controls['designation'].errors
              "
              class="text-danger">
              <div
                *ngIf="
                  addEmployeeForm.controls['designation'].errors['required']
                ">
                Designation is required
              </div>
            </div>
          </div>

          <div class="form-group col-md-6">
            <label for="pension">Pension</label>
            <input
              type="text"
              formControlName="pension"
              class="form-control"
              placeholder="Pension"
              (keyup)="calculateGrossIncome($event)"
              [ngClass]="{
                'is-invalid':
                  submitted && addEmployeeForm.controls['pension'].errors
              }" />
            <div
              *ngIf="submitted && addEmployeeForm.controls['pension'].errors"
              class="text-danger">
              <div
                *ngIf="addEmployeeForm.controls['pension'].errors['pattern']">
                Pension must be Number with only two digits allowed after the
                decimal
              </div>
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="CRA"
              >Consolidated Relief Allowance
              <!-- <sup style="font-weight: 800;" class="ml-1 font-wegiht-bold text-danger">*</sup> -->
            </label>
            <input
              type="text"
              formControlName="CRA"
              class="form-control"
              placeholder="Consolidated Relief Allowance"
              [attr.disabled]="true"
              [ngClass]="{
                'is-invalid':
                  submitted && addEmployeeForm.controls['CRA'].errors
              }" />
            <div
              *ngIf="submitted && addEmployeeForm.controls['CRA'].errors"
              class="text-danger">
              <div *ngIf="addEmployeeForm.controls['CRA'].errors['pattern']">
                Consolidated Relief Allowance must be Number with only three
                digits allowed after the decimal
              </div>
            </div>
          </div>

          <div class="form-group col-md-6">
            <label for="NHIS">National Health Insurance Scheme</label>
            <input
              type="text"
              formControlName="NHIS"
              class="form-control"
              placeholder="National Health Insurance Scheme"
              (keyup)="calculateGrossIncome($event)"
              [ngClass]="{
                'is-invalid':
                  submitted && addEmployeeForm.controls['NHIS'].errors
              }" />
            <div
              *ngIf="submitted && addEmployeeForm.controls['NHIS'].errors"
              class="text-danger">
              <div *ngIf="addEmployeeForm.controls['NHIS'].errors['pattern']">
                National Health Insurance Scheme must be Number with only two
                digits allowed after the decimal
              </div>
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="NHF">National Housing Fund</label>
            <input
              type="text"
              formControlName="NHF"
              class="form-control"
              placeholder="National Housing Fund"
              (keyup)="calculateGrossIncome($event)"
              [ngClass]="{
                'is-invalid':
                  submitted && addEmployeeForm.controls['NHF'].errors
              }" />
            <div
              *ngIf="submitted && addEmployeeForm.controls['NHF'].errors"
              class="text-danger">
              <div *ngIf="addEmployeeForm.controls['NHF'].errors['pattern']">
                National Housing Fund must be Number with only two digits
                allowed after the decimal
              </div>
            </div>
          </div>

          <div class="form-group col-md-6">
            <label for="lifeAssurance">Life Assurance</label>
            <input
              type="text"
              formControlName="lifeAssurance"
              class="form-control"
              placeholder="Life Assurance"
              (keyup)="calculateGrossIncome($event)"
              [ngClass]="{
                'is-invalid':
                  submitted && addEmployeeForm.controls['lifeAssurance'].errors
              }" />
            <div
              *ngIf="
                submitted && addEmployeeForm.controls['lifeAssurance'].errors
              "
              class="text-danger">
              <div
                *ngIf="
                  addEmployeeForm.controls['lifeAssurance'].errors['pattern']
                ">
                Life Assurance must be numbers with only two digits allowed
                after the decimal
              </div>
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="totalIncome"
              >Total Income
              <sup
                style="font-weight: 800"
                class="ml-1 font-wegiht-bold text-danger"
                >*</sup
              >
            </label>
            <input
              type="text"
              formControlName="totalIncome"
              class="form-control"
              placeholder="Total Income"
              (keyup)="calculateGrossIncome($event)"
              [ngClass]="{
                'is-invalid':
                  submitted && addEmployeeForm.controls['totalIncome'].errors
              }" />
            <div
              *ngIf="
                submitted && addEmployeeForm.controls['totalIncome'].errors
              "
              class="text-danger">
              <div
                *ngIf="
                  addEmployeeForm.controls['totalIncome'].errors['required']
                ">
                Total Income required
              </div>
              <div
                *ngIf="
                  addEmployeeForm.controls['totalIncome'].errors['pattern']
                ">
                Total Income must be Number with only two digits allowed after
                the decimal
              </div>
            </div>
          </div>

          <div class="form-group col-md-6">
            <label for="grossIncome"
              >Gross Income<sup
                style="font-weight: 800"
                class="ml-1 font-wegiht-bold text-danger"
                >*</sup
              ></label
            >
            <input
              type="text"
              formControlName="grossIncome"
              class="form-control"
              placeholder="Gross Income"
              [attr.disabled]="true"
              [ngClass]="{
                'is-invalid':
                  (submitted &&
                    addEmployeeForm.controls['grossIncome'].errors) ||
                  grossIncomeIncorrect
              }" />
            <div
              *ngIf="
                submitted && addEmployeeForm.controls['grossIncome'].errors
              "
              class="text-danger">
              <div
                *ngIf="
                  addEmployeeForm.controls['grossIncome'].errors['required']
                ">
                Gross Income is required
              </div>
              <div
                *ngIf="
                  addEmployeeForm.controls['grossIncome'].errors['pattern']
                ">
                Gross must be Number with only two digits allowed after the
                decimal
              </div>
            </div>
            <div *ngIf="grossIncomeIncorrect" class="text-danger">
              <div>Gross Income cannot be less than or equal to zero</div>
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="nationality"
              >Nationality<sup
                style="font-weight: 800"
                class="ml-1 font-wegiht-bold text-danger"
                >*</sup
              ></label
            >
            <input
              type="text"
              formControlName="nationality"
              class="form-control"
              placeholder="Nationality"
              [ngClass]="{
                'is-invalid':
                  submitted && addEmployeeForm.controls['nationality'].errors
              }" />
            <div
              *ngIf="
                submitted && addEmployeeForm.controls['nationality'].errors
              "
              class="text-danger">
              <div
                *ngIf="
                  addEmployeeForm.controls['nationality'].errors['required']
                ">
                Nationality is required
              </div>
              <!-- <div *ngIf="addEmployeeForm.controls['myfile']pension.errors.minlength">Confirm Password must be at least 6 characters long.</div> -->
            </div>
          </div>

          <div class="form-group col-md-6">
            <label for="zipCode"
              >Zip Code<sup
                style="font-weight: 800"
                class="ml-1 font-wegiht-bold text-danger"
                >*</sup
              ></label
            >
            <select
              type="text"
              name="zipCode"
              formControlName="zipCode"
              id="zipCode"
              class="form-control"
              style="min-width: 339px"
              [ngClass]="{
                'is-invalid':
                  submitted && addEmployeeForm.controls['zipCode'].errors
              }">
              <option value="">Select Zip Code</option>
              <option *ngFor="let zipcode of zipCodes" [value]="zipcode.city">
                {{ zipcode.city }} {{ " " }} {{ zipcode.postalcode }}
              </option>
            </select>
            <div
              *ngIf="submitted && addEmployeeForm.controls['zipCode'].errors"
              class="text-danger">
              <div
                *ngIf="addEmployeeForm.controls['zipCode'].errors['required']">
                Zip Code is required
              </div>
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="existingTaxId">Taxpayer ID</label>
            <input
              type="text"
              formControlName="existingTaxId"
              class="form-control"
              placeholder="Existing Taxpayer ID"
              maxlength="11"
              [ngClass]="{
                'is-invalid':
                  submitted && addEmployeeForm.controls['existingTaxId'].errors
              }" />
            <div
              *ngIf="
                submitted && addEmployeeForm.controls['existingTaxId'].errors
              "
              class="text-danger">
              <div
                *ngIf="
                  addEmployeeForm.controls['existingTaxId'].errors['minlength']
                ">
                Existing Taxpayer ID must be at least 11 characters long.
              </div>
              <div
                *ngIf="
                  addEmployeeForm.controls['existingTaxId'].errors['maxlength']
                ">
                Existing Taxpayer ID must be at most 11 characters long.
              </div>
            </div>
          </div>

          <div class="form-group col-md-6">
            <label for="startMonthId"
              >Start Month<sup
                style="font-weight: 800"
                class="ml-1 font-wegiht-bold text-danger"
                >*</sup
              ></label
            >
            <select
              type="text"
              name="startMonthId"
              formControlName="startMonthId"
              id="startMonthId"
              class="form-control"
              [ngClass]="{
                'is-invalid':
                  submitted && addEmployeeForm.controls['startMonthId'].errors
              }">
              <option value="">Select Start Month</option>
              <option value="01">January</option>
              <option value="02">February</option>
              <option value="03">March</option>
              <option value="04">April</option>
              <option value="05">May</option>
              <option value="06">June</option>
              <option value="07">July</option>
              <option value="08">August</option>
              <option value="09">September</option>
              <option value="10">October</option>
              <option value="11">November</option>
              <option value="12">December</option>
            </select>
            <div
              *ngIf="
                submitted && addEmployeeForm.controls['startMonthId'].errors
              "
              class="text-danger">
              <div
                *ngIf="
                  addEmployeeForm.controls['startMonthId'].errors['required']
                ">
                Start Month is required
              </div>
            </div>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group col-md-6">
            <label for="homeAddress"
              >Home Address<sup
                style="font-weight: 800"
                class="ml-1 font-wegiht-bold text-danger"
                >*</sup
              ></label
            >
            <textarea
              type="text"
              formControlName="homeAddress"
              class="form-control"
              rows="3"
              placeholder="Home Address"
              [ngClass]="{
                'is-invalid':
                  submitted && addEmployeeForm.controls['homeAddress'].errors
              }"></textarea>
            <div
              *ngIf="
                submitted && addEmployeeForm.controls['homeAddress'].errors
              "
              class="text-danger">
              <div
                *ngIf="
                  addEmployeeForm.controls['homeAddress'].errors['required']
                ">
                Home Address is required
              </div>
              <div
                *ngIf="
                  addEmployeeForm.controls['homeAddress'].errors['minlength']
                ">
                Home Address must be at least 10 characters long.
              </div>
            </div>
          </div>

          <div class="form-group col-md-6">
            <label for="localGovernmentId"
              >Local Government<sup class="ml-1 font-wegiht-bold text-danger"
                >*</sup
              >
            </label>
            <select
              name="localGovernmentId"
              formControlName="localGovernmentId"
              id="localGovernmentId"
              class="form-control"
              style="min-width: 339px"
              [ngClass]="{
                'is-invalid':
                  submitted &&
                  addEmployeeForm.controls['localGovernmentId'].errors
              }">
              <option value="">Select Local Government</option>
              <option
                *ngFor="let stateLocalGovt of stateLocalGovts"
                [value]="stateLocalGovt.lga_code">
                {{ stateLocalGovt.name }}
              </option>
            </select>
            <div
              *ngIf="
                submitted &&
                addEmployeeForm.controls['localGovernmentId'].errors
              "
              class="text-danger">
              <div
                *ngIf="
                  addEmployeeForm.controls['localGovernmentId'].errors[
                    'required'
                  ]
                ">
                Local Government is required
              </div>
            </div>
          </div>
        </div>

        <button
          *ngIf="showSaveEmployee"
          type="submit"
          class="btn btn button-login">
          <i class="fas fa-plus-square"></i> Save Employee
        </button>
      </form>
    </div>
  </div>

  <div class="modal-footer">
    <button
      type="button"
      class="btn btn-outline-dark button-login"
      (click)="modal.close('Save click')">
      Ok
    </button>
  </div>
</ng-template>
