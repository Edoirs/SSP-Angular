<div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <div class="content-header"></div>
    <!-- /.content-header -->
  
    <!-- Main content -->
    <section class="content" data-select2-id="32">
      <div class="container-fluid" data-select2-id="31">
        <!-- <flash-messages></flash-messages> -->
        <!-- SELECT2 EXAMPLE -->
        <div class="card card-secondary">
          <div class="card-header custome">
            <h3 class="card-title">List of Businesses</h3>
          </div>
          <!-- /.card-header -->
          <div class="card-body">
            <div class="over-auto">
              <table
                class="table table-bordered table-condensed"
                *ngIf="businessesData"
                datatable
                [dtOptions]="dtOptions"
                width="100%">
                <thead>
                  <tr>
                    <th>S/N</th>
                    <th>Business RIN</th>
                    <th>Business Name</th>
                    <th>Address</th>
                    <th>LGA</th>
                    <th>No. of Employees</th>
                    <!-- <th>Employees Count</th>
                    <th>Taxpayer Role</th> -->
                    <th>View</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let mydata of businessesData; index as i">
                    <td>{{ i + 1 }}</td>
                    <td>{{ mydata.business_id }}</td>
                    <td>{{ mydata.business_name | titlecase }}</td>
                    <td>{{ mydata.business_address == null ? "N/A" : mydata.business_address }}</td>
                    <td>{{ mydata.industry_sector_name == null ? "N/A" : mydata.industry_sector_name }}</td>
                    <td>
                      {{ mydata.lga_name == null ? "N/A" : mydata.lga_name }}
                    </td>
                    <!-- <td>{{ mydata.industry_subsector_name == null ? "N/A" : mydata.industry_subsector_name }}</td> -->
                    <!-- <td>{{ mydata.employees_count }}</td>
                    <td>{{ mydata.taxpayer_role }}</td> --> 
                    <td title="View">
                      <button
                        class="btn btn-sm btn-outline-success"
                        (click)="viewBusinessEmployees(employees, mydata)"
                      >
                        <i class="nav-icon fas fa-eye"></i>
                      </button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <!-- /.card-body -->
          <!-- <div class="card-footer" *ngIf="apidataEmpty">
            <button *ngIf="showCreateSchedule" type="submit" (click)="forwardSchedule(schedulemodal)"
              class="btn btn button-login"><i class="fas fa-plus-square"></i> Create Schedule</button>
          </div> -->
        </div>
      </div>
      <!-- /.container-fluid -->
    </section>
    <!-- /.content -->
  </div>
  
  <ng-template #employees let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Monthly Remittance Employees</h4>
        <div>
          <button
            type="submit"
            class="btn btn-outline-success text-white role float-right mx-2"
            style="font-size: 12px; padding: 5px; margin-top: -3px;"
            (click)="viewAddEmployee(addEmployee); isEdit = false; showSaveEmployee = true"
          >
            <i class="fas fa-plus-square"></i> Add Employee
          </button>
  
          <button
            type="submit"
            class="btn btn-outline-success text-white role float-right mx-2"
            style="font-size: 12px; padding: 5px; margin-top: -3px;"
            (click)="viewUploadEmployee(uploadModal)"
          >
            <i class="fas fa-file-upload"></i> Bulk Upload
          </button>
        </div>
    </div>

    <div class="modal-body">
      <div class="container" *ngIf="showListOfEmployees">
        <table
          class="table table-bordered table-condensed"
          *ngIf="employeesData"
          datatable
          [dtOptions]="dtOptions"
          width="100%">
          <thead>
            <tr>
              <th>S/N</th>
              <th>Employee RIN</th>
              <th>Full Name</th>
              <!-- <th>Designation</th> -->
              <!-- <th>Phone</th> -->
              <th>Total Income (₦)</th>
              <th>Pension (₦)</th>
              <th>NHIS (₦)</th>
              <th>NHF (₦)</th>
              <th>Life Assurance (₦)</th>
              <th>Gross Income (₦)</th>
              <th>CRA (₦)</th>
              <th>Date Created</th>
              <th>View</th>
              <th *ngIf="showEditEmployee">Edit</th>
              <th *ngIf="showDeleteEmployee">Delete</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let mydata of employeesData; index as i">
              <td>{{ i + 1 }}</td>
              <td>{{ mydata.taxpayer_id }}</td>
              <td>
                {{ mydata.first_name | titlecase }}
                {{ mydata.last_name | titlecase }}
              </td>

              <!-- <td>{{ mydata.designation }}</td> -->
              <!-- <td>{{ mydata.phone }}</td> -->
              <td>{{ mydata.total_income | number }}</td>
              <td>{{ mydata.pension | number }}</td>
              <td>{{ mydata.nhis | number }}</td>
              <td>{{ mydata.nhf | number }}</td>
              <td>{{ mydata.life_assurance | number }}</td>
              <td>{{ mydata.gross_income | number }}</td>
              <td>{{ mydata.cra | number }}</td>
              <td>{{ mydata.created_at | date: "dd MMM yyyy" }}</td>
              <td title="View">
                <!-- <button
                  class="btn btn-sm btn-outline-success"
                  (click)="viewEmployee(updateEmployee, mydata)"
                >
                  <i class="nav-icon fas fa-eye"></i>
                </button> -->
                <button
                  class="btn btn-sm btn-outline-success"
                  (click)="viewEmployee(addEmployee, mydata)"
                >
                  <i class="nav-icon fas fa-eye"></i>
                </button>
              </td>
              <td title="Edit" *ngIf="showEditEmployee">
                <button
                  class="btn btn-sm btn-outline-success"
                  (click)="editEmployee(addEmployee, mydata); isEdit = true; showSaveEmployee = true;"
                >
                  <i class="nav-icon fas fa-edit"></i>
                </button>
                <!-- <button
                  class="btn btn-sm btn-outline-success"
                  (click)="editEmployee(updateEmployee, mydata)"
                >
                  <i class="nav-icon fas fa-edit"></i>
                </button> -->
              </td>

              <td *ngIf="showDeleteEmployee" title="Delete">
                <button
                  (click)="deleteEmployee(mydata.id)"
                  class="btn btn-sm btn-danger"
                >
                  <i class="nav-icon far fa-trash-alt"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="modal-footer" *ngIf="apidataEmpty">
      <button 
        type="submit"
        (click)="forwardSchedule(schedulemodal)"
        class="btn btn button-login">
        <i class="fas fa-plus-square"></i> Create Schedule
      </button>
      <button
        type="button"
        class="btn btn-outline-dark button-login float-right"
        (click)="modal.close('Save click')"
      >
        Ok
      </button>
    </div>
  </ng-template>
  
  
  <ng-template #schedulemodal let-modal>
    <div class="modal-header">
      <span>
        <h4 class="modal-title" id="modal-basic-title">Forward Schedule</h4>
      </span>
      <!-- <span class="text-danger">(All fields are required)</span> -->
      <!--<button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                <span aria-hidden="true">&times;</span>
              </button> -->
    </div>
  
    <div class="modal-body">
      <div class="container">
        <form
          [formGroup]="forwardScheduleForm"
          (ngSubmit)="onSubmitSchedule(forwardScheduleForm.value)"
        >
          <div class="form-row">
            <div class="form-group col-md-6">
              <label for="scheduleYear"
                >Schedule Year<sup class="font-wegiht-bold text-danger"
                  >*</sup
                ></label
              >
              <input
                type="text"
                pattern="[^\s]+"
                formControlName="scheduleYear"
                maxlength="4"
                class="form-control"
                placeholder="Schedule Year Eg: 2019"
                (keyup)="changeScheduleYearStatus()"
                [ngClass]="{ 'is-invalid': submitted &amp;&amp; forwardScheduleForm.controls['scheduleYear'].errors || submitted &amp;&amp; !isScheduleYearValid }"
              />
              <div
                *ngIf="submitted &amp;&amp; forwardScheduleForm.controls['scheduleYear'].errors"
                class="text-danger"
              >
                <div
                  *ngIf="
                    forwardScheduleForm.controls['scheduleYear'].errors['required']
                  "
                >
                  Schedule Year is required
                </div>
                <div
                  *ngIf="
                    forwardScheduleForm.controls['scheduleYear'].errors['minlength']
                  "
                >
                  Schedule Year must be at least 4 characters long.
                </div>
                <div
                  *ngIf="
                    forwardScheduleForm.controls['scheduleYear'].errors['maxLength']
                  "
                >
                  Schedule Year must be 4 characters long.
                </div>
                <div
                  *ngIf="forwardScheduleForm.controls['scheduleYear'].errors['pattern']"
                >
                  Schedule Year must be Number Only
                </div>
              </div>
              <div
                *ngIf="submitted &amp;&amp; !isScheduleYearValid"
                class="text-danger"
              >
                <div>Schedule Year cannot be less than 2010</div>
              </div>
              <!-- <div *ngIf="yearIncorrect">Schedule Year must be a year after 1999 and this year</div> -->
            </div>
  
            <div class="form-group col-md-6">
              <label for="scheduleMonthId"
                >Schedule Month<sup class="font-wegiht-bold text-danger"
                  >*</sup
                ></label
              >
              <select
                type="text"
                name="scheduleMonthId"
                formControlName="scheduleMonthId"
                id="scheduleMonthId"
                class="form-control"
                [ngClass]="{ 'is-invalid': submitted &amp;&amp; forwardScheduleForm.controls['scheduleMonthId'].errors }"
              >
                <option value="">-- Select Tax Month --</option>
                <option value="01">January</option>
                <option value="02">February</option>
                <option value="03">March</option>
                <option value="04">April</option>
                <option value="05">May</option>
                <option value="06">June</option>
                <option value="07">July</option>
                <option value="08">August</option>
                <option value="09">September</option>
                <option value="10">October</option>
                <option value="11">November</option>
                <option value="12">December</option>
              </select>
              <div
                *ngIf="submitted &amp;&amp; forwardScheduleForm.controls['scheduleMonthId'].errors"
                class="text-danger"
              >
                <div
                  *ngIf="
                    forwardScheduleForm.controls['scheduleMonthId'].errors['required']
                  "
                >
                  Schedule Month is required
                </div>
              </div>
            </div>
          </div>
  
          <div class="form-row">
            <div class="form-group col-md-6">
              <label for="comment">Comment </label>
              <textarea
                type="text"
                formControlName="comment"
                class="form-control"
                rows="4"
                placeholder="Comment"
                [ngClass]="{ 'is-invalid': submitted &amp;&amp; forwardScheduleForm.controls['comment'].errors }"
              ></textarea>
              <div
                *ngIf="submitted &amp;&amp; forwardScheduleForm.controls['comment'].errors"
                class="text-danger"
              >
                <div *ngIf="forwardScheduleForm.controls['comment'].errors['required']">
                  Comment is required
                </div>
              </div>
            </div>
          </div>
  
          <button
            type="submit"
            [disabled]="!forwardScheduleForm.valid"
            class="btn btn button-login"
          >
            <i class="far fa-save"></i> Forward Schedule
          </button>
        </form>
      </div>
    </div>
  
    <div class="modal-footer">
      <button
        type="button"
        class="btn btn-outline-dark button-login"
        (click)="modal.close('Save click')"
      >
        Ok
      </button>
    </div>
  </ng-template>
  
  <ng-template #addEmployee let-modal>
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title"> {{ (showSaveEmployee) ? (isEdit ? "Edit" : "Add") : ''  }} Employee Details And
        Monthly Income</h4>
    </div>

    <div class="modal-body">
      <div class="container">
        <form
          [formGroup]="addEmployeeForm"
          (ngSubmit)="onSubmit(addEmployeeForm.value)"
        >
          <!-- START NEW FORM -->
          <div class="form-row">
            <div class="form-group col-md-6">
              <label for="existingTaxId">Existing Taxpayer ID</label>
              <input
                type="text"
                formControlName="existingTaxId"
                class="form-control"
                maxlength="11"
                placeholder="Existing Taxpayer ID"
                [ngClass]="{ 'is-invalid': submitted &amp;&amp; addEmployeeForm.controls['existingTaxId'].errors }"
              />
              <div
                *ngIf="submitted &amp;&amp; addEmployeeForm.controls['existingTaxId'].errors"
                class="text-danger"
              >
                <div
                  *ngIf="addEmployeeForm.controls['existingTaxId'].errors['minlength']"
                >
                  Existing Taxpayer ID must be at least 11 character long
                </div>
                <div
                  *ngIf="addEmployeeForm.controls['existingTaxId'].errors['maxLength']"
                >
                  Existing Taxpayer ID must be at most 11 character long
                </div>
              </div>
            </div>
  
            <div class="form-group col-md-6">
              <label for="basicIncome"
                >Basic Income<sup
                  style="font-weight: 800"
                  class="ml-1 font-wegiht-bold text-danger"
                  >*</sup
                >
              </label>
              <input
                type="text"
                formControlName="basicIncome"
                class="form-control"
                (keyup)="calculateTotalIncome($event)"
                placeholder="Basic Income"
                [ngClass]="{ 'is-invalid': submitted &amp;&amp; addEmployeeForm.controls['basicIncome'].errors }"
              />
              <div
                *ngIf="submitted &amp;&amp; addEmployeeForm.controls['basicIncome'].errors"
                class="text-danger"
              >
                <div *ngIf="addEmployeeForm.controls['basicIncome'].errors['required']">
                  Basic Income required
                </div>
                <div *ngIf="addEmployeeForm.controls['basicIncome'].errors['pattern']">
                  Basic Income must be Number with only two digits allowed after
                  the decimal
                </div>
              </div>
            </div>
          </div>
  
          <div class="form-row">
            <div class="form-group col-md-6">
              <label for="titleId"
                >Title
                <sup class="ml-1 font-wegiht-bold text-danger">*</sup>
              </label>
              <select
                type="text"
                name="titleId"
                formControlName="titleId"
                id="titleId"
                class="form-control"
                [ngClass]="{ 'is-invalid': submitted &amp;&amp; addEmployeeForm.controls['titleId'].errors }"
              >
                <option value="">Select Title</option>
                <option value="Mr.">Mr.</option>
                <option value="Mrs.">Mrs.</option>
                <option value="Miss.">Miss.</option>
              </select>
              <div
                *ngIf="submitted &amp;&amp; addEmployeeForm.controls['titleId'].errors"
                class="text-danger"
              >
                <div *ngIf="addEmployeeForm.controls['titleId'].errors['required']">
                  Title is required
                </div>
              </div>
            </div>
            <div class="form-group col-md-6">
              <label for="rent"
                >Rent
                <!-- <sup
                  style="font-weight: 800"
                  class="ml-1 font-wegiht-bold text-danger"
                  >*</sup
                > -->
              </label>
              <input
                type="text"
                formControlName="rent"
                class="form-control"
                placeholder="Rent"
                (keyup)="calculateTotalIncome($event)"
                [ngClass]="{ 'is-invalid': submitted &amp;&amp; addEmployeeForm.controls['rent'].errors }"
              />
              <div
                *ngIf="submitted &amp;&amp; addEmployeeForm.controls['rent'].errors"
                class="text-danger"
              >
                <div *ngIf="addEmployeeForm.controls['rent'].errors['pattern']">
                  Rent must be Number with only two digits allowed after the
                  decimal
                </div>
              </div>
            </div>
          </div>
  
          <div class="form-row">
            <div class="form-group col-md-6">
              <label for="firstName"
                >First Name<sup class="ml-1 font-wegiht-bold text-danger"
                  >*</sup
                ></label
              >
              <input
                type="text"
                pattern="[^\s]+"
                formControlName="firstName"
                class="form-control"
                placeholder="First Name"
                [ngClass]="{ 'is-invalid': submitted &amp;&amp; addEmployeeForm.controls['firstName'].errors }" />
              <div
                *ngIf="submitted &amp;&amp; addEmployeeForm.controls['firstName'].errors"
                class="text-danger"
              >
                <div *ngIf="addEmployeeForm.controls['firstName'].errors['required']">
                  First Name is required
                </div>
                <div *ngIf="addEmployeeForm.controls['firstName'].errors['pattern']">
                  First Name can only contain alphabets
                </div>
                <div *ngIf="addEmployeeForm.controls['firstName'].errors['maxLength']">
                  First Name must be at most 30 characters
                </div>
              </div>
            </div>
  
            <div class="form-group col-md-6">
              <label for="transport"
                >Transport
                <!-- <sup
                  style="font-weight: 800"
                  class="ml-1 font-wegiht-bold text-danger"
                  >*</sup
                > -->
              </label>
              <input
                type="text"
                formControlName="transport"
                class="form-control"
                (keyup)="calculateTotalIncome($event)"
                placeholder="transport"
                [ngClass]="{ 'is-invalid': submitted &amp;&amp; addEmployeeForm.controls['transport'].errors }"
              />
              <div
                *ngIf="submitted &amp;&amp; addEmployeeForm.controls['transport'].errors"
                class="text-danger"
              >
                <!-- <div *ngIf="addEmployeeForm.controls['transport'].errors['required']">
                  Transport required
                </div> -->
                <div *ngIf="addEmployeeForm.controls['transport'].errors['pattern']">
                  Transport must be Number with only two digits allowed after the
                  decimal
                </div>
              </div>
            </div>
          </div>
  
          <div class="form-row">
            <div class="form-group col-md-6">
              <label for="surname"
                >Surname<sup class="ml-1 font-wegiht-bold text-danger"
                  >*</sup
                ></label
              >
              <input
                type="text"
                pattern="[^\s]+"
                formControlName="surname"
                class="form-control"
                placeholder="Surname"
                [ngClass]="{ 'is-invalid': submitted &amp;&amp; addEmployeeForm.controls['surname'].errors }"
              />
              <div
                *ngIf="submitted &amp;&amp; addEmployeeForm.controls['surname'].errors"
                class="text-danger"
              >
                <div *ngIf="addEmployeeForm.controls['surname'].errors['required']">
                  Surname is required
                </div>
                <div *ngIf="addEmployeeForm.controls['surname'].errors['pattern']">
                  Surname can only contain alphabets
                </div>
                <div *ngIf="addEmployeeForm.controls['surname'].errors['maxLength']">
                  Surname must at most 30 characters
                </div>
              </div>
            </div>
  
            <div class="form-group col-md-6">
              <label for="otherIncome"
                >Other Income
                <!-- <sup
                  style="font-weight: 800"
                  class="ml-1 font-wegiht-bold text-danger"
                  >*</sup
                > -->
              </label>
              <input
                type="text"
                formControlName="otherIncome"
                class="form-control"
                (keyup)="calculateTotalIncome($event)"
                placeholder="Other Income"
                [ngClass]="{ 'is-invalid': submitted &amp;&amp; addEmployeeForm.controls['otherIncome'].errors }"
              />
              <div
                *ngIf="submitted &amp;&amp; addEmployeeForm.controls['otherIncome'].errors"
                class="text-danger"
              >
                <!-- <div *ngIf="addEmployeeForm.controls['otherIncome'].errors['required']">
                  otherIncome required
                </div> -->
                <div *ngIf="addEmployeeForm.controls['otherIncome'].errors['pattern']">
                  Other Income must be Number with only two digits allowed after
                  the decimal
                </div>
              </div>
            </div>
          </div>
  
          <div class="form-row">
            <div class="form-group col-md-6">
              <label for="otherName"
                >Other Name
                <!-- <sup class="ml-1 font-wegiht-bold text-danger">*</sup> -->
              </label>
              <input
                type="text"
                pattern="[^\s]+"
                formControlName="otherName"
                class="form-control"
                placeholder="Other Name"
                [ngClass]="{ 'is-invalid': submitted &amp;&amp; addEmployeeForm.controls['otherName'].errors }"
              />
              <div
                *ngIf="submitted &amp;&amp; addEmployeeForm.controls['otherName'].errors"
                class="text-danger"
              >
                <!-- <div *ngIf="addEmployeeForm.controls['myfile']otherName.errors['required']">
                  Other Name is required
                </div> -->
                <div *ngIf="addEmployeeForm.controls['otherName'].errors['pattern']">
                  Other Name can only contain alphabets
                </div>
                <div *ngIf="addEmployeeForm.controls['otherName'].errors['maxLength']">
                  Other Name must be at most 30 characters
                </div>
              </div>
            </div>
            <div class="form-group col-md-6">
              <label for="totalIncome"
                >Total Income<sup
                  style="font-weight: 800"
                  class="ml-1 font-wegiht-bold text-danger"
                  >*</sup
                >
              </label>
              <input
                type="text"
                formControlName="totalIncome"
                class="form-control"
                placeholder="Total Income"
                (keyup)="calculateGrossIncome($event)"
                [attr.disabled]="true"
                [ngClass]="{ 'is-invalid': submitted &amp;&amp; addEmployeeForm.controls['totalIncome'].errors }"
              />
              <div
                *ngIf="submitted &amp;&amp; addEmployeeForm.controls['totalIncome'].errors"
                class="text-danger"
              >
                <div *ngIf="addEmployeeForm.controls['totalIncome'].errors['required']">
                  Total Income required
                </div>
                <div *ngIf="addEmployeeForm.controls['totalIncome'].errors['pattern']">
                  Total Income must be Number with only two digits allowed after
                  the decimal
                </div>
              </div>
            </div>
          </div>
  
          <div class="form-row">
            <div class="form-group col-md-6">
              <label for="phoneNumber"
                >Phone Number
                <sup class="ml-1 font-wegiht-bold text-danger">*</sup>
              </label>
              <input
                type="text"
                maxlength="11"
                formControlName="phoneNumber"
                class="form-control"
                placeholder="Phone Number"
                [ngClass]="{ 'is-invalid': submitted &amp;&amp; addEmployeeForm.controls['phoneNumber'].errors }"
              />
              <div
                *ngIf="submitted &amp;&amp; addEmployeeForm.controls['phoneNumber'].errors"
                class="text-danger"
              >
                <div *ngIf="addEmployeeForm.controls['phoneNumber'].errors['required']">
                  Phone Number is required
                </div>
                <div
                  *ngIf="addEmployeeForm.controls['phoneNumber'].errors['minlength']"
                >
                  Phone Number must be at least 11 digit long
                </div>
                <div
                  *ngIf="addEmployeeForm.controls['phoneNumber'].errors['maxLength']"
                >
                  Phone Number must be at most 11 digit long
                </div>
                <div *ngIf="addEmployeeForm.controls['phoneNumber'].errors['pattern']">
                  Phone Number must be numbers only and start with 0
                </div>
              </div>
            </div>
  
            <div class="form-group col-md-6">
              <label for="pension">Pension</label>
              <input
                type="text"
                formControlName="pension"
                class="form-control"
                placeholder="Pension"
                (keyup)="calculateGrossIncome($event)"
                [ngClass]="{ 'is-invalid': submitted &amp;&amp; addEmployeeForm.controls['pension'].errors }"
              />
              <div
                *ngIf="submitted &amp;&amp; addEmployeeForm.controls['pension'].errors"
                class="text-danger"
              >
                <div *ngIf="addEmployeeForm.controls['pension'].errors['pattern']">
                  Pension must be Number with only two digits allowed after the
                  decimal
                </div>
              </div>
            </div>
          </div>
  
          <div class="form-row">
            <div class="form-group col-md-6">
              <label for="emailAddress"
                >Email Address<sup class="ml-1 font-wegiht-bold text-danger"
                  >*</sup
                ></label
              >
              <input
                type="text"
                formControlName="emailAddress"
                class="form-control"
                placeholder="Email Address"
                [ngClass]="{ 'is-invalid': submitted &amp;&amp; addEmployeeForm.controls['emailAddress'].errors }"
              />
              <div
                *ngIf="submitted &amp;&amp; addEmployeeForm.controls['emailAddress'].errors"
                class="text-danger"
              >
                <div
                  *ngIf="addEmployeeForm.controls['emailAddress'].errors['required']"
                >
                  Email Address is required
                </div>
                <div
                  *ngIf="addEmployeeForm.controls['emailAddress'].errors['minlength']"
                >
                  Email Address must not be more than 45 characters long
                </div>
                <div *ngIf="addEmployeeForm.controls['emailAddress'].errors['pattern']">
                  Provide a valid Email address
                </div>
              </div>
            </div>
  
            <div class="form-group col-md-6">
              <label for="NHF">National Housing Fund (NHF)</label>
              <input
                type="text"
                formControlName="NHF"
                class="form-control"
                placeholder="National Housing Fund"
                (keyup)="calculateGrossIncome($event)"
                [ngClass]="{ 'is-invalid': submitted &amp;&amp; addEmployeeForm.controls['NHF'].errors }"
              />
              <div
                *ngIf="submitted &amp;&amp; addEmployeeForm.controls['NHF'].errors"
                class="text-danger"
              >
                <div *ngIf="addEmployeeForm.controls['NHF'].errors['pattern']">
                  National Housing Fund must be numbers with only two digits
                  allowed after the decimal
                </div>
              </div>
            </div>
          </div>
  
          <div class="form-row">
            <div class="form-group col-md-6">
              <label for="bvn"
                >BVN <span class="note-color">**</span>
                <!-- <sup class="ml-1 font-wegiht-bold text-danger">*</sup> -->
              </label>
              <input
                type="text"
                formControlName="bvn"
                maxlength="11"
                class="form-control"
                placeholder="BVN"
                (keyup)="changeTinPhoneNinBvnStatus()"
                [ngClass]="{ 'is-invalid': submitted &amp;&amp; addEmployeeForm.controls['bvn'].errors || submitted &amp;&amp; validateCacTin }"
              />
              <div
                *ngIf="submitted &amp;&amp; addEmployeeForm.controls['bvn'].errors"
                class="text-danger"
              >
                <div *ngIf="addEmployeeForm.controls['bvn'].errors['minlength']">
                  BVN must be at least 11 digit long
                </div>
                <div *ngIf="addEmployeeForm.controls['bvn'].errors['maxLength']">
                  BVN must be at most 11 digit long
                </div>
                <div *ngIf="addEmployeeForm.controls['bvn'].errors['pattern']">
                  BVN must be numeric value only
                </div>
              </div>
              <div
                *ngIf="submitted &amp;&amp; validateCacTin"
                class="text-danger"
              >
                <div>JTB-TIN or NIN or BVN Number is required</div>
              </div>
            </div>
            <div class="form-group col-md-6">
              <label for="NHIS">National Health Insurance Scheme (NHIS)</label>
              <input
                type="text"
                formControlName="NHIS"
                class="form-control"
                placeholder="National Health Insurance Scheme"
                (keyup)="calculateGrossIncome($event)"
                [ngClass]="{ 'is-invalid': submitted &amp;&amp; addEmployeeForm.controls['NHIS'].errors }"
              />
              <div
                *ngIf="submitted &amp;&amp; addEmployeeForm.controls['NHIS'].errors"
                class="text-danger"
              >
                <div *ngIf="addEmployeeForm.controls['NHIS'].errors['pattern']">
                  National Health Insurance Scheme must be numbers with only two
                  digits allowed after the decimal
                </div>
              </div>
            </div>
          </div>
  
          <div class="form-row">
            <div class="form-group col-md-6">
              <label for="employeeTIN"
                >Employee JTB-TIN <span class="note-color">**</span></label
              >
              <input
                type="text"
                formControlName="employeeTIN"
                maxlength="10"
                class="form-control"
                placeholder="Employee JTB-TIN"
                (keyup)="changeTinPhoneNinBvnStatus()"
                [ngClass]="{ 'is-invalid': submitted &amp;&amp; addEmployeeForm.controls['employeeTIN'].errors || submitted &amp;&amp; validateCacTin }"
              />
              <div
                *ngIf="submitted &amp;&amp; addEmployeeForm.controls['employeeTIN'].errors"
                class="text-danger"
              >
                <div
                  *ngIf="addEmployeeForm.controls['employeeTIN'].errors['minlength']"
                >
                  Employee JTB-TIN must be at least 10 digit long
                </div>
                <div
                  *ngIf="addEmployeeForm.controls['employeeTIN'].errors['maxLength']"
                >
                  Employee JTB-TIN must be at most 10 digit long
                </div>
                <div *ngIf="addEmployeeForm.controls['employeeTIN'].errors['pattern']">
                  Employee JTB-TIN must be numeric value only
                </div>
              </div>
              <div
                *ngIf="submitted &amp;&amp; validateCacTin"
                class="text-danger"
              >
                <div>JTB-TIN or NIN or BVN Number is required</div>
              </div>
            </div>
            <div class="form-group col-md-6">
              <label for="lifeAssurance">Life Assurance</label>
              <input
                type="text"
                formControlName="lifeAssurance"
                class="form-control"
                placeholder="Life Assurance"
                (keyup)="calculateGrossIncome($event)"
                [ngClass]="{ 'is-invalid': submitted &amp;&amp; addEmployeeForm.controls['lifeAssurance'].errors }"
              />
              <div
                *ngIf="submitted &amp;&amp; addEmployeeForm.controls['lifeAssurance'].errors"
                class="text-danger"
              >
                <div
                  *ngIf="addEmployeeForm.controls['lifeAssurance'].errors['pattern']"
                >
                  Life Assurance must be numbers with only two digits allowed
                  after the decimal
                </div>
              </div>
            </div>
          </div>
  
          <div class="form-row">
            <div class="form-group col-md-6">
              <label for="nin"
                >NIN <span class="note-color">**</span>
                <!-- <sup class="ml-1 font-wegiht-bold text-danger">*</sup> -->
              </label>
              <input
                type="text"
                formControlName="nin"
                class="form-control"
                id="nin"
                placeholder="Enter NIN"
                maxlength="11"
                (keyup)="changeTinPhoneNinBvnStatus()"
                [ngClass]="{ 'is-invalid': submitted &amp;&amp; addEmployeeForm.controls['nin'].errors || submitted &amp;&amp; validateCacTin }"
              />
              <div
                *ngIf="submitted &amp;&amp; addEmployeeForm.controls['nin'].errors"
                class="text-danger"
              >
                <div *ngIf="addEmployeeForm.controls['nin'].errors!['minlength']">
                  NIN can not be less than 11 characters
                </div>
                <div *ngIf="addEmployeeForm.controls['nin'].errors!['pattern']">
                  NIN must be numeric value only
                </div>
              </div>
              <div
                *ngIf="submitted &amp;&amp; validateCacTin"
                class="text-danger"
              >
                <div>JTB-TIN or NIN or BVN Number is required</div>
              </div>
            </div>
            <div class="form-group col-md-6">
              <label for="grossIncome"
                >Gross Income<sup class="ml-1 font-wegiht-bold text-danger"
                  >*</sup
                ></label
              >
              <input
                type="text"
                formControlName="grossIncome"
                class="form-control"
                placeholder="Gross Income"
                [attr.disabled]="true"
                [ngClass]="{ 'is-invalid': submitted &amp;&amp; addEmployeeForm.controls['grossIncome'].errors || grossIncomeIncorrect }"
              />
              <div
                *ngIf="submitted &amp;&amp; addEmployeeForm.controls['grossIncome'].errors"
                class="text-danger"
              >
                <div *ngIf="addEmployeeForm.controls['grossIncome'].errors['required']">
                  Gross Income is required
                </div>
                <div *ngIf="addEmployeeForm.controls['grossIncome'].errors!['pattern']">
                  Gross must be numbers with only two digits allowed after the
                  decimal
                </div>
              </div>
              <div *ngIf="grossIncomeIncorrect" class="text-danger">
                <div>Gross Income cannot be less than or equal to zero</div>
              </div>
            </div>
          </div>
  
          <div class="form-row">
            <div class="form-group col-md-6">
              <label for="localGovernmentId"
                >Local Government<sup class="ml-1 font-wegiht-bold text-danger"
                  >*</sup
                >
              </label>
              <select
                name="localGovernmentId"
                formControlName="localGovernmentId"
                id="localGovernmentId"
                class="form-control"
                style="min-width: 339px"
                [ngClass]="{ 'is-invalid': submitted &amp;&amp; addEmployeeForm.controls['localGovernmentId'].errors }"
              >
                <option value="">Select Local Government</option>
                <option
                  *ngFor="let stateLocalGovt of stateLocalGovts"
                  [value]="stateLocalGovt.lga_code"
                >
                  {{ stateLocalGovt.name }}
                </option>
              </select>
              <div
                *ngIf="submitted &amp;&amp; addEmployeeForm.controls['localGovernmentId'].errors"
                class="text-danger"
              >
                <div
                  *ngIf="
                    addEmployeeForm.controls['localGovernmentId'].errors!['required']
                  "
                >
                  Local Government is required
                </div>
              </div>
            </div>
  
            <div class="form-group col-md-6">
              <label for="startMonthId"
                >Start Month<sup class="ml-1 font-wegiht-bold text-danger"
                  >*</sup
                ></label
              >
              <select
                type="text"
                name="startMonthId"
                formControlName="startMonthId"
                id="startMonthId"
                class="form-control"
                [ngClass]="{ 'is-invalid': submitted &amp;&amp; addEmployeeForm.controls['startMonthId'].errors }"
              >
                <option value="">Select Start Month</option>
                <option value="01">January</option>
                <option value="02">February</option>
                <option value="03">March</option>
                <option value="04">April</option>
                <option value="05">May</option>
                <option value="06">June</option>
                <option value="07">July</option>
                <option value="08">August</option>
                <option value="09">September</option>
                <option value="10">October</option>
                <option value="11">November</option>
                <option value="12">December</option>
              </select>
              <div
                *ngIf="submitted &amp;&amp; addEmployeeForm.controls['startMonthId'].errors"
                class="text-danger"
              >
                <div
                  *ngIf="addEmployeeForm.controls['startMonthId'].errors!['required']"
                >
                  Start Month is required
                </div>
              </div>
            </div>
          </div>
  
          <div class="form-row">
            <div class="form-group col-md-6">
              <label for="nationality"
                >Nationality<sup class="ml-1 font-wegiht-bold text-danger"
                  >*</sup
                ></label
              >
              <input
                type="text"
                formControlName="nationality"
                class="form-control"
                placeholder="Nationality"
                [ngClass]="{ 'is-invalid': submitted &amp;&amp; addEmployeeForm.controls['nationality'].errors }"
              />
              <div
                *ngIf="submitted &amp;&amp; addEmployeeForm.controls['nationality'].errors"
                class="text-danger"
              >
                <div *ngIf="addEmployeeForm.controls['nationality'].errors['required']">
                  Nationality is required
                </div>
                <div *ngIf="addEmployeeForm.controls['nationality'].errors['pattern']">
                  Nationality must be numbers only
                </div>
              </div>
            </div>
            <div class="form-group col-md-6">
              <label for="designation"
                >Designation<sup class="ml-1 font-wegiht-bold text-danger"
                  >*</sup
                ></label
              >
              <input
                type="text"
                formControlName="designation"
                class="form-control"
                placeholder="Designation"
                [ngClass]="{ 'is-invalid': submitted &amp;&amp; addEmployeeForm.controls['designation'].errors }"
              />
              <div
                *ngIf="submitted &amp;&amp; addEmployeeForm.controls['designation'].errors"
                class="text-danger"
              >
                <div *ngIf="addEmployeeForm.controls['designation'].errors['required']">
                  Designation is required
                </div>
                <div *ngIf="addEmployeeForm.controls['designation'].errors['pattern']">
                  Designation must be alphabets only
                </div>
                <div
                  *ngIf="addEmployeeForm.controls['designation'].errors!['maxLength']"
                >
                  Designation must be at most 40 characters
                </div>
              </div>
            </div>
          </div>
  
          <div class="form-row">
            <div class="form-group col-md-6">
              <label for="zipCode"
                >Zip Code<sup class="ml-1 font-wegiht-bold text-danger"
                  >*</sup
                ></label
              >
              <select
                type="text"
                name="zipCode"
                formControlName="zipCode"
                id="zipCode"
                class="form-control"
                style="min-width: 339px"
                [ngClass]="{ 'is-invalid': submitted &amp;&amp; addEmployeeForm.controls['zipCode'].errors }"
              >
                <option value="">Select Zip Code</option>
                <option *ngFor="let zipcode of zipCodes" [value]="zipcode.city">
                  {{ zipcode.city }} {{ " " }} {{ zipcode.postalcode }}
                </option>
              </select>
              <div
                *ngIf="submitted &amp;&amp; addEmployeeForm.controls['zipCode'].errors"
                class="text-danger"
              >
                <div *ngIf="addEmployeeForm.controls['zipCode'].errors!['required']">
                  Zip Code is required
                </div>
              </div>
            </div>
            <div class="form-group col-md-6">
              <label for="contactAddress"
                >Home Address<sup class="ml-1 font-wegiht-bold text-danger"
                  >*</sup
                ></label
              >
              <textarea
                type="text"
                formControlName="contactAddress"
                class="form-control"
                rows="3"
                placeholder="Home Address"
                [ngClass]="{ 'is-invalid': submitted &amp;&amp; addEmployeeForm.controls['contactAddress'].errors }"
              ></textarea>
              <div
                *ngIf="submitted &amp;&amp; addEmployeeForm.controls['contactAddress'].errors"
                class="text-danger"
              >
                <div
                  *ngIf="addEmployeeForm.controls['contactAddress'].errors['required']"
                >
                  Home Address is required
                </div>
                <div
                  *ngIf="addEmployeeForm.controls['contactAddress'].errors['minlength']"
                >
                  Home Address must be at least 10 characters long
                </div>
                <div
                  *ngIf="addEmployeeForm.controls['contactAddress'].errors['maxLength']"
                >
                  Home Address must be at most 80 characters
                </div>
              </div>
            </div>
          </div>
  
          <!-- END NEW FORM -->
  
          <!-- <div class="form-row">
            <div class="form-group col-md-6">
              <label for="CRA">Consolidated Relief Allowance (CRA)</label>
              <input
                type="text"
                formControlName="CRA"
                class="form-control"
                placeholder="Consolidated Relief Allowance"
                [attr.disabled]="true"
                [ngClass]="{ 'is-invalid': submitted &amp;&amp; addEmployeeForm.controls['myfile']CRA.errors }"
              />
              <div
                *ngIf="submitted &amp;&amp; addEmployeeForm.controls['myfile']CRA.errors"
                class="text-danger"
              >
                <div *ngIf="addEmployeeForm.controls['myfile']CRA.errors['pattern']">
                  Consolidated Relief Allowance must be Number with only three
                  digits allowed after the decimal
                </div>
              </div>
            </div>
          </div> -->
  
          <button
            type="submit"
            *ngIf="showSaveEmployee"
            class="btn btn button-login"
          >
            <i class="fas fa-plus-square"></i> Save Employee
          </button>
        </form>
      </div>
    </div>

    <div class="modal-footer">
      <button
        type="button"
        id="closeCreateModal"
        class="btn btn-outline-dark button-login"
        (click)="modal.close('Save click')">
        Ok
      </button>
    </div>
  </ng-template>
  
  <ng-template #uploadModal let-modal>
    <div class="card card-secondary">
      <div class="card-header custome">
        <h3 class="card-title">Upload Employees</h3>
      </div>
      <!-- /.card-header -->
      <div class="card-body">
        <div class="alert alert-success" role="alert" *ngIf="isResponse == 1">
          {{ isMessage }}
        </div>
  
        <div class="alert alert-danger" role="alert" *ngIf="isError == 1">
          {{ isMessage }}
        </div>
  
        <form [formGroup]="uploadForm" (ngSubmit)="submitUpload()">
          <div class="form-row">
            <div class="form-group col-md-6">
              <label for="fileInput">Select File to Upload</label>
  
              <div class="custom-file">
                <input
                  formControlName="myfile"
                  id="myfile"
                  type="file"
                  class="custom-file-input"
                  (change)="onFileChange($event)"
                  [ngClass]="{
                    'is-invalid': submitted && uploadForm.controls['myfile'].errors
                  }"
                  accept=".xls,.xlsx"
                />
                <label class="custom-file-label" for="customFile">{{
                  filePath == null ? "Choose file (xlsx or xls)" : filePath
                }}</label>
              </div>
  
              <div
                *ngIf="submitted &amp;&amp; uploadForm.controls['myfile'].touched && uploadForm.controls['myfile'].invalid"
                class="text-danger"
              >
                <div *ngIf="uploadForm.controls['myfile'].errors!['required']">
                  File is required.
                </div>
              </div>
            </div>
          </div>
  
          <button
            type="submit"
            class="btn btn button-login"
            [disabled]="file == null"
          >
            Upload File
          </button>
        </form>
  
        <div class="login-remeber">
          <a href="{{ sample_file }}" target="_blank">
            Download employee template here</a
          >
        </div>
      </div>
      <!-- /.card-body -->
      <div class="modal-footer">
        <button
          type="button"
          id="closeUploadModal"
          class="btn btn-outline-dark button-login"
          (click)="modal.close('Save click')"
        >
          Ok
        </button>
      </div>
    </div>
  </ng-template>
  