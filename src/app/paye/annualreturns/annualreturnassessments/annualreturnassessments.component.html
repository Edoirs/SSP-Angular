<div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <div class="content-header">
  
    </div>
    <!-- /.content-header -->
  
    <!-- Main content -->
    <section class="content" data-select2-id="32">
      <div class="container-fluid" data-select2-id="31">
        <!-- <flash-messages></flash-messages> -->
        <!-- SELECT2 EXAMPLE -->
        <div class="card card-secondary">
          <div class="card-header custome">
            <h3 class="card-title">List of Businesses</h3>
  
  
          </div>
          <!-- /.card-header -->
          <div class="card-body">
  
            <div  class="over-auto">
              <!-- <p class="login-box-msg bold-black">List of Employees</p> -->
              <table class="table table-bordered table-condensed" *ngIf="businessesData;" datatable [dtOptions]="dtOptions"
                width="100%">
                <thead>
                  <tr>
                    <th>S/N</th>
                    <th>Business ID</th>
                    <th>Business Name</th>
                    <th>Sector</th>
                    <th>Subsector</th>
                    <th>Address</th>
                    <th>LGA</th>
                    <th >View</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let mydata of businessesData; index as i">
                    <td>{{ i + 1 }}</td>
                    <td>{{ mydata.business_id }}</td>
                    <td>{{ mydata.business_name | titlecase }}</td>
                    <td>{{ mydata.industry_sector_name}}</td>
                    <td>{{ mydata.industry_subsector_name }}</td>
                    <td>{{ mydata.business_address }}</td>
                    <td>{{ mydata.lga_name ? mydata.lga_name : 'N/A' }}</td>
  
                    <td title="View"><button class="btn btn-sm btn-outline-success"
                        (click)="viewBusinessAnnualReturn(annualReturnModal, mydata)"><i class="nav-icon fas fa-eye"></i>
                      </button></td>
  
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <!-- /.card-body -->
          <!-- <div class="card-footer" *ngIf="apidataEmpty">
            <button *ngIf="showCreateSchedule" type="submit" (click)="forwardSchedule(schedulemodal)"
              class="btn btn button-login"><i class="fas fa-plus-square"></i> Create Schedule</button>
          </div> -->
        </div>
  
      </div><!-- /.container-fluid -->
    </section>
    <!-- /.content -->
  </div>
  
  
  <ng-template #annualReturnModal let-modal >
    <div class="card card-secondary">
        <div class="card-header custome">
            <h3 class="card-title">Filed Annual Return</h3>
        </div>
        <!-- /.card-header -->
        <div class="card-body">
            <div class="over-auto">
                <table class="table table-bordered table-condensed" *ngIf="assessmentsData;" datatable
                    [dtOptions]="dtOptions" width="100%">
                    <thead>
                        <tr>
                            <th>S/N</th>
                            <th>Date Filed</th>
                            <!-- <th>Annual Return ID</th> -->
                            <th>Tax Year</th>
                            <th>Annual Tax Paid (₦)</th>
                            <!-- <th>Status</th> -->
                            <th>Revenue Approval Status</th>
                            <!-- <th>Corporate ID</th> -->
                            <th>View</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let mydata of assessmentsData; index as i">
                            <td>{{ i + 1 }}</td>
                            <td>{{ mydata.created_at | date:'dd MMM yyyy' }}</td>
                            <!-- <td>{{ mydata.annual_return_id }}</td> -->
                            <td>{{ mydata.due_date | date:'MMMM, y' }}</td>
                            <td>{{ mydata.annual_tax_due | number }}</td>
                            <!-- <td>{{ mydata.status == 0 ? "In Active" : "Active" }}</td> -->
                            <!-- <td>{{ mydata.revenue_board_approval_status == 0 ? "In Progress" : "Approved" }}</td> -->
                            <td><p [ngClass]="{'text-warning': mydata.revenue_board_approval_status == 0, 'text-success': mydata.revenue_board_approval_status == 1, 'text-primary': mydata.revenue_board_approval_status == 2} ">
                              {{ mydata.revenue_board_approval_status == 0 ? "Pending" : mydata.revenue_board_approval_status == 1 ? "Closed" : "Reassessed" }}
                            </p></td>
                            <!-- <td>{{ mydata.corporate_id }}</td> -->
  
                            <td style="width: 10%" title="View">
                                <button class="btn btn-sm btn-outline-success"
                                    (click)="viewAssessment(mymodal, mydata)"><i class="nav-icon fas fa-eye"></i>
  
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
  
        </div>
        <!-- /.card-body -->
        <div class="card-footer">
            <button type="button" class="btn btn-outline-dark button-login" (click)="modal.close('Save click')">Ok</button>
        </div>
    </div>
  </ng-template>
  
  <ng-template #mymodal let-modal>
      <div class="modal-header">
          <h4 class="modal-title" id="modal-basic-title">Assessment Details</h4>
          <!--<button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                <span aria-hidden="true">&times;</span>
              </button> -->
      </div>
  
      <div class="modal-body">
          <div class="container">
  
              <div class="form-row">
                  <div class="col-md-12">
                      <!-- <img src="assets/dist/img/login-user-img.png" class="rounded float-left" alt="User Image"
                          style="height:90px; width: 130px;"> -->
                  </div>
              </div>
  
              <form [formGroup]="assessmentForm">
  
                  <div class="form-row">
                      <div class="form-group col-md-6">
                          <label for="annualReturnID">Annual Return ID</label>
                          <input type="text" formControlName="annualReturnID" class="form-control" [attr.disabled]="true"
                              [ngClass]="{ 'is-invalid': submitted &amp;&amp; assessmentForm.controls['annualReturnID'].errors }" />
                      </div>
  
                      <div class="form-group col-md-6">
                        <label for="annualTaxDue">Annual Tax Paid</label>
                        <input type="text" formControlName="annualTaxDue" class="form-control" [attr.disabled]="true"
                            [ngClass]="{ 'is-invalid': submitted &amp;&amp; assessmentForm.controls['annualTaxDue'].errors }" />
                    </div>
  
                  </div>
  
                  <div class="form-row">
                      <div class="form-group col-md-6">
                          <label for="approvalStatus">Approval Status</label>
                          <input type="text" formControlName="approvalStatus" class="form-control" [attr.disabled]="true"
                              [ngClass]="{ 'is-invalid': submitted &amp;&amp; assessmentForm.controls['approvalStatus'].errors }" />
                      </div>
  
  
                  </div>
              </form>
  
              <div>
                  <table class="table table-bordered table-condensed" *ngIf="assessmentEmployeesData;" datatable
                      [dtOptions]="dtOptions" width="100%">
                      <thead>
                          <tr>
                              <th>S/N</th>
                              <!-- <th>Date Created</th> -->
                              <th>Taxpayer ID</th>
  
                              <th>Full Name</th>
                              <!-- <th>First Name</th> -->
                              <!-- <th>Middle Name</th> -->
                              <!-- <th>Surname</th> -->
                              <!-- <th>Designation</th> -->
                              <th>Nationality</th>
  
                              <!-- <th>Monthly Income (₦)</th> -->
                              <th>Total Income (₦)</th>
                              <!-- <th>Annual Gross Income (₦)</th> -->
                              <th>Annual Tax Paid (₦)</th>
                              <th>Expected Annual Tax (₦)</th>
                              <th>Under Remitted Tax (₦)</th>
                              <th>Month(s)</th>
                          </tr>
                      </thead>
                      <tbody>
                          <tr *ngFor="let mydata of assessmentEmployeesData; index as i">
                              <td>{{ i + 1 }}</td>
                              <!-- <td>{{ mydata.created_at | date}}</td> -->
                              <td>{{ mydata.taxpayer_id}}</td>
  
                              <td>{{ mydata.first_name | titlecase }} {{ mydata.middle_name | titlecase }} {{ mydata.surname | titlecase }}</td>
                              <!-- <td>{{ mydata.first_name | titlecase }}</td> -->
                              <!-- <td>{{ mydata.middle_name | titlecase }}</td> -->
                              <!-- <td>{{ mydata.surname | titlecase }}</td> -->
                              <!-- <td>{{ mydata.designation | titlecase }}</td> -->
                              <td>{{ mydata.nationality | titlecase }}</td>
  
                              <!-- <td>{{ mydata.monthly_income | number }}</td> -->
                              <!-- <td>{{ mydata.annual_gross_income | number }}</td> -->
                              <td>{{ mydata.total_income | number:'1.2-2' }}</td>
                              <td>{{ mydata.annual_tax_paid | number:'1.2-2' }}</td>
                              <td>{{ mydata.expected_annual_tax | number:'1.2-2' }}</td>
                              <td>{{ mydata.under_remittance | number:'1.2-2' }}</td>
                              <td>{{ mydata.months }}</td>
                          </tr>
                      </tbody>
                  </table>
              </div>
  
          </div>
      </div>
  
      <div class="modal-footer">
          <!-- <button type="submit" (click)="generateReassessment(reassessmentmodal)" class="btn btn button-login">Generate Reassessment</button> -->
          <button type="button" class="btn btn-outline-dark button-login" (click)="modal.close('Save click')">Ok</button>
      </div>
  </ng-template>
  
  
  <ng-template #reassessmentmodal let-modal>
      <div class="modal-header">
          <h4 class="modal-title" id="modal-basic-title">Generate Reassessment</h4>
          <!--<button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
                <span aria-hidden="true">&times;</span>
              </button> -->
      </div>
  
      <div class="modal-body">
          <div class="container">
  
              <div class="form-row">
                  <div class="col-md-12">
                      <!-- <img src="assets/dist/img/login-user-img.png" class="rounded float-left" alt="User Image"
                          style="height:90px; width: 130px;"> -->
                  </div>
              </div>
  
              <form [formGroup]="reassessmentForm" (ngSubmit)="onSubmitReassessment(reassessmentForm.value)">
                  <div class="form-row">
                      <div class="form-group col-md-6">
                          <label for="comment">Comment</label>
                          <textarea type="text" formControlName="comment" class="form-control" rows="4"
                              [ngClass]="{ 'is-invalid': submitted &amp;&amp; reassessmentForm.controls['comment'].errors }"></textarea>
                          <div *ngIf="submitted &amp;&amp; reassessmentForm.controls['comment'].errors"
                              class="text-danger">
                              <div *ngIf="reassessmentForm.controls['comment'].errors['required']">Comment is required
                              </div>
                          </div>
                      </div>
  
                  </div>
  
                  <!-- <button type="submit" class="btn btn button-login">Generate Reassessment</button> -->
              </form>
          </div>
      </div>
  
      <div class="modal-footer">
          <button type="button" class="btn btn-outline-dark button-login" (click)="modal.close('Save click')">Ok</button>
      </div>
  </ng-template>
  